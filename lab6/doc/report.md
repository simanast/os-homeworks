## Лабораторная работа № 6.
### Проверка целостности данных.

Для всех заданий продемонстрировать работу на тестах (тест=входные данные, для которых правильный результат известен заранее, т.е. данные и ожидаемый результат), подготовленных систематически.
1. Разработать программу (check-xor.c), которая вычисляет с использованием XOR и выводит контрольную сумму для входных файлов. Использовать 8-битный символ без знака (1 байт) под эту сумму.  
    
    Программа высчитывает контрольную сумму применением к битовому представлению каждого символа операции xor.  
    Для трёх текстовых файлов известны контрольные суммы: 37, 0, 57.  
    В результате выполнения программы для этих трёх файлов получаем: 
    ```
    37
    0
    57
    ```

2. Разработать аналогичную программу (check-fletcher.c), которая вычисляет и выводит контрольную сумму Флетчера (the Fletcher checksum) для входных файлов.
    
    На каждой итерации считаем две суммы - первую как сумму по модулю 255 (т.к. используем 8-битное представление) текущего символа и суммы предыдущих, вторую как сумму первой суммы и предыдущего значения второй. Сама контрольная сумма - 16-битная последовательность, первые 8 бит - первая сумма, последние - вторая сумма.  
    Для трёх текстовых файлов известны контрольные суммы: 3589, 25700, 1575.  
    В результате выполнения программы для этих трёх файлов получаем:  
     
    ```
    3589
    25700
    1575
    ```  

3. Разработать аналогичную программу (crc.c), которая вычисляет и выводит 16-битный циклический избыточный код (the 16-bit CRC).  

    Из файла берётся первое слово. Если старший бит в слове «1», то слово сдвигается влево на один разряд с последующим выполнением операции XOR c порождающим полиномом. Соответственно, если старший бит в слове «0», то после сдвига операция XOR не выполняется. После сдвига теряется старший бит, а младший бит освобождается — его значение устанавливается равным нулю. На место младшего бита загружается очередной бит из файла, и операция повторяется до тех пор, пока не загрузится последний бит файла. 

4. Сравнить время работы (gettimeofday) программ из 1, 2 и 3 на входных файлах различных размеров. Какая предпочтительнее с точки зрения времени и качества проверки?
    
    Для этого вызовем каждую программу с флагом '-time', чтобы узнать затраченное на выполнение время.  
    Результат:
    Файл размером 321,4 kB  
    Xor: 0.018 с;  
    Fletcher: 0.014 с;  
    Crc: 0.037 с.    
    
    Файл размером 217 b  
    Xor: 0.000020 с;  
    Fletcher: 0.000024 с;  
    Crc: 0.000042 с.  
    
    Как мы видим, с точки зрения затраченного времени предпочтительнее использовать алгоритм нахождения контрольной с пом. xor. С точки зрения качества проверки лучше использовать crc.

5. Разработать программу (create-csum.c), которая вычисляет однобайтовые контрольные суммы для каждого 4KB блока входного файла и сохраняет их в контрольном файле, а также программу (check-csum.c), которая читает файл, также вычисляет однобайтовые контрольные суммы для каждого 4KB блока и сравнивает их с заранее вычисленными значениями из контрольного файла. Если обнаруживаются расхождения, то выводятся соответствующие сообщения.  
      

